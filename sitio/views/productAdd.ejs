<!--head-->
<%- include('./partials/head', {title:'Agregar producto'}) %> 
<body class="bg-light">
 <!--HEADER-->
 <%- include('./partials/headerAdmin') %> 
    
<main class="container">
    <div class="row">
        <div class="col-12 col-md-10 col-lg-8 mt-5 mx-auto">
            <div class="card p-4">
                <div class="card-header bg-info"> 
                     <h2>Agregar producto</h2>
                </div>
              <div class="card-body">
                  <form class="row" action="/products/create" method="POST" enctype="multipart/form-data" id="form-product">
                      <div class="row">
                          <div class="col-12 mb-3 "> 
                              <div class="form-floating ">
                        <input type="text" class="form-control <%= locals.errors && errors.name ? 'is-invalid' : null %>" id="name" name="name" placeholder="Nombre de producto" 
                        value=<%= locals.old && old.name ? old.name:null%>>
                        <label for="name">Nombre de producto</label>
                      </div>
                      <span id="nameError" class="text-danger small ms-2"><%= locals.errors && errors.name ? errors.name.msg : null%> </span>
                  
                    </div>
                      <div class="col-12 mb-3">
                          <div class="form-floating ">
                        <textarea class="form-control <%= locals.errors && errors.description ? 'is-invalid' : null %>" style="resize: none; height: 100px"  placeholder="Descripción de producto " id="description" name="description"><%= locals.old && old.description ? old.description:null%></textarea>
                        <label for="description">Descripción</label>
                      </div>
                      <span id="descriptionError" class="text-danger small ms-2"><%= locals.errors && errors.description ? errors.description.msg : null%> </span>
                      
                    </div>
                    
                    <div class="col-12 col-md-6 mb-3">
                        <div class="form-floating col-md-6">
                        <input type="number" class="form-control <%= locals.errors && errors.price ? 'is-invalid' : null %>" name="price" id="price" value=<%= locals.old && old.price ? old.price:null%>>
                        <label for="price">Precio</label>
                      </div> 
                      <span id="priceError" class="text-danger small ms-2"><%= locals.errors && errors.price ? errors.price.msg : null%> </span>

                    </div>
                    <div class="col-12 col-md-6 mb-3">
                        <div class="form-floating col-md-6 ">

                          <input type="number" class="form-control" id="discount" name="discount" placeholder="ej: 20" >
                        <label for="discount">Descuento</label>
                      </div>
             
<span class="text-danger small ms-2"><%= locals.errors && errors.discount ? errors.discount.msg : null%> </span>

                      
                    </div>
                    

                      <div class="col-12 col-md-6">
                        <div class="form-floating">
                          <select class="form-select <%= locals.errors && errors.category ? 'is-invalid' : null %>" id="category" aria-label="Floating label select example" name="category">
                            <option value="" selected hidden>Elegí la categoría</option>
                            <% categories.forEach(category => { %>
                             <option value="<%= category.id %>" <%= locals.old && old.category.id === category.id  ? 'selected' : null%> > <%= category.name %>  </option>
                            <% }) %>
                          </select>
                          <label for="category">Categoría</label>
                        </div>
                        <span class="text-danger small ms-2"><%= locals.errors && errors.category ? errors.category.msg : null%> </span>

                        </div>

                      <div class="col-12 col-md-6">
                        <div class="mb-3 ">
                          <label for="image" class="btn btn-outline-info w-100 ">Subir imagen</label>
                          <input hidden class="form-control" type="file" id="image" name="image">
                                    <span id="imageError" class="text-danger small ms-2"><%= locals.errors && errors.image ? errors.image.msg : null%> </span>
                        </div>
                      </div>
                      
                  <div class="col-12 mt-3"> 
                    <button type="submit" class="btn btn-outline-info ">Guardar</button> </div>
               
                    
                
                    
              </form>
              </div>
            
        </div>
    </div>
        
    </div>
    
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
<script src="/javascript/productAddValidator.js"></script>
</body>
</html>